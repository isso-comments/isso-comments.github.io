<!DOCTYPE html>


<html>
  <head>
    <meta charset="utf-8">
    
    <title>Multiple Sites</title>
    
    <!--link rel="stylesheet" href="../../../_static/css/site.css" type="text/css" /-->
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/site.css"/>
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX:  '.txt'
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/language_data.js"></script>
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
    <link rel="search" title="Search" href="../../../search/" />
    <link rel="top" title="Isso  documentation" href="../../../" /> 
</head>
<body>
    <div class="wrapper">
        <div class="header">
            <header>
                <img class="logo" src="../../../_static/isso.svg" alt="Wynaut by @veekun"/>
                <div class="title">
                    <a href="../../.././">
                        <h1>Isso</h1>
                        <h2>a commenting server similar to Disqus</h2>
                    </a>
                </div>
            </header>
            <nav>
                <ul>
                    <li><a href="../../../faq/">FAQ</a></li>
                    <li><a href="../../../contribute/">Contribute</a></li>
                    <li><a href="../../">Documentation</a></li>
                </ul>
            </nav>
        </div>

        <div class="outer">
            
    <header>
        <h1>Multiple Sites</h1>
    </header>

        </div>


        <main>
        
    <div class="sidebar">
    
        

<strong>Getting Started</strong>
<ul>
    
    <li><a href="../../install/">Installation</a></li>

    
    <li><a href="../../quickstart/">Quickstart</a></li>

    
    <li><a href="../../troubleshooting/">Troubleshooting</a></li>

</ul>
<strong>Advanced Setup</strong>
<ul>
    
    <li><a href="../sub-uri/">Sub URI</a></li>

    <li class="active">
    <a href="#">Multiple Sites</a></li>

</ul>
<strong>Configuration</strong>
<ul>
    
    <li><a href="../../configuration/server/">Server</a></li>

    
    <li><a href="../../configuration/client/">Client</a></li>

</ul>
<strong>Extras</strong>
<ul>
    
    <li><a href="../../extras/deployment/">Deployment</a></li>

    
    <li><a href="../../extras/advanced-integration/">Advanced Integration</a></li>

    
    <li><a href="../../extras/advanced-migration/">Advanced Migration</a></li>

    
    <li><a href="../../extras/testing/">Testing</a></li>

    
    <li><a href="../../extras/api/">API</a></li>

    
    <li><a href="../../extras/contribs/">Community tools</a></li>

</ul>
    
    </div>
    <div class="docs">
        <div class="section" id="multiple-sites">
<span id="configure-multiple-sites"></span><h1>Multiple Sites<a class="headerlink" href="#multiple-sites" title="Permalink to this headline">¶</a></h1>
<p>Isso is designed to serve comments for a single website and therefore stores
comments for a relative URL. This is done to support HTTP, HTTPS and even domain transfers
without manual intervention. You can chain Isso to support multiple
websites on different domains.</p>
<p>The following example uses <a class="reference external" href="http://gunicorn.org/">gunicorn</a> as WSGI server (
you can use uWSGI as well). Let’s say you maintain two websites, like
foo.example and other.bar:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ cat /etc/isso.d/foo.example.cfg
<span class="o">[</span>general<span class="o">]</span>
<span class="nv">name</span> <span class="o">=</span> foo
<span class="nv">host</span> <span class="o">=</span> http://foo.example/
<span class="nv">dbpath</span> <span class="o">=</span> /var/lib/isso/foo.example.db

$ cat /etc/isso.d/other.bar.cfg
<span class="o">[</span>general<span class="o">]</span>
<span class="nv">name</span> <span class="o">=</span> bar
<span class="nv">host</span> <span class="o">=</span> http://other.bar/
<span class="nv">dbpath</span> <span class="o">=</span> /var/lib/isso/other.bar.db
</pre></div>
</div>
<p>Then you run Isso with gunicorn (separate multiple configuration files by
semicolon):</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">export</span> <span class="nv">ISSO_SETTINGS</span><span class="o">=</span><span class="s2">&quot;/etc/isso.d/foo.example.cfg;/etc/isso.d/other.bar.cfg&quot;</span>
$ gunicorn isso.dispatch -b localhost:8080
</pre></div>
</div>
<p>In your webserver configuration, proxy Isso as usual:</p>
<div class="highlight-nginx notranslate"><div class="highlight"><pre><span></span><span class="k">server</span> <span class="p">{</span>
    <span class="kn">listen</span> <span class="s">[::]:80</span><span class="p">;</span>
    <span class="kn">server_name</span> <span class="s">comments.example</span><span class="p">;</span>

    <span class="kn">location</span> <span class="s">/</span> <span class="p">{</span>
        <span class="kn">proxy_pass</span> <span class="s">http://localhost:8080</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>When you now visit <a class="reference external" href="http://comments.example/">http://comments.example/</a>, you will see your different Isso
configuration separated by /<cite>name</cite>.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ curl http://comments.example/
/foo
/bar
</pre></div>
</div>
<p>Just embed the JavaScript including the new relative path, e.g.
<em>http://comments.example/foo/js/embed.min.js</em>. Make sure, you don’t mix the
URLs on both sites as it will most likely cause CORS-related errors.</p>
</div>

    </div>

        </main>

        <div class="push"></div>
    </div>

    <div class="outer footer">
        <footer>
        &copy; Copyright 2022, Martin Zimmermann & contributors.

        Made with <a href="http://sphinx-doc.org/">Sphinx</a>.
        </footer>
    </div>
  </body>
</html>